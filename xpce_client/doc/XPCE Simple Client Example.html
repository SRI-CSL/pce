<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head><meta content="text/html; charset=ISO-8859-1" http-equiv="content-type"><title>XPCE Simple Client Example</title></head>
<body><div style="text-align: center;"><big><big>XPCE Simple Client Example</big></big><br></div><br>The
following example demonstrates how you can implement a client to
interact with the xpce server. Let's assume we are writing the client for
the following:<br><ul><li>Sorts: Person, Male, Female</li><li>Constants: Bob, Tom Smith of sort Male</li><li>Constants: Maria, Rose of type Female&nbsp;</li><li>Direct Predicate: Married(Person, Person)</li><li>Indirect Predicate: Likes(Person, Person)</li><li>Rule: Married($x, $y) =&gt; Likes($x, $y) &nbsp;, weight 2.5</li><li>Observed Facts: Married(Bob, Maria) and Married('Tom Smith', Rose)</li></ul>The following Java code implements the example above and accesses the server running on port 8080:<br><br><span style="font-weight: bold;">XpceClient</span> client = new XpceClient("http://localhost:8080/RPC2");<br><span style="color: rgb(0, 153, 0);">// Adding sorts:</span><br><span style="font-weight: bold;">Sort</span> person = new Sort("Person");<br><span style="font-weight: bold;">Sort</span> male = new Sort("Male", person);<br><span style="font-weight: bold;">Sort</span> female = new Sort("Female", person);<br>client.<span style="color: rgb(51, 51, 255);">addSort</span>(person);<br>client.<span style="color: rgb(51, 51, 255);">addSort</span>(male);<br>client.<span style="color: rgb(51, 51, 255);">addSort</span>(female);<br><span style="color: rgb(0, 153, 0);">// Adding constants in two different methods:</span><br><span style="font-weight: bold;"></span>Constant bob = new Constant("Bob", male), tom = new Constant("Tom Smith", male);<br>client.<span style="color: rgb(51, 51, 255);">addConstant</span>(bob);<br>client.<span style="color: rgb(51, 51, 255);">addConstant</span>(tom);<br>client.<span style="color: rgb(51, 51, 255);">addConstant</span>(female, "Rose", "Maria");<br><span style="font-weight: bold;">PredicateDecl</span> marriedPredicate = new PredicateDecl("Married", person, person); &nbsp;<span style="color: rgb(0, 153, 0);">// Direct Predicate</span><br><span style="font-weight: bold;">PredicateDecl</span> likesPredicate = new PredicateDecl(false, "Likes", person, person); &nbsp;<span style="color: rgb(0, 153, 0);">// Indirect Predicate</span><br>client.<span style="color: rgb(51, 51, 255);">addPredicate</span>(marriedPredicate);<br>client.<span style="color: rgb(51, 51, 255);">addPredicate</span>(likesPredicate);<br><span style="font-weight: bold;">Fact</span> fact1 = new Fact(marriedPredicate, "Bob", "Maria");<br><span style="font-weight: bold;">Fact</span> fact2 = new Fact(marriedPredicate, "Tom Smith", "Rose");<br>client.<span style="color: rgb(51, 51, 255);">assertFact</span>(fact1);<br>client.<span style="color: rgb(51, 51, 255);">assertFact</span>(fact2);<br><span style="color: rgb(0, 153, 0);">// Creating the rule using the java classes:</span><br><span style="font-weight: bold;">Atom</span> a1 = new Atom(marriedPredicate, new Variable("x"), new Variable("y"));<br><span style="font-weight: bold;">Atom</span> a2 = new Atom(likesPredicate, new Variable("x"), new Variable("y"));<br><span style="font-weight: bold;">ImpliesFormula</span> f = new ImpliesFormula(a1, a2);<br>client.<span style="color: rgb(51, 51, 255);">add</span>(f, 2.5, "SampleClient");<br><span style="color: rgb(0, 153, 0);">// Requesting the xpce server to compute the probabilities:</span><br>client.<span style="color: rgb(51, 51, 255);">mcsat</span>();<br>Thread.sleep(1000);<br><span style="color: rgb(0, 153, 0);">// Creating the question formula using the parser: &nbsp;&nbsp;</span> &nbsp;&nbsp;&nbsp; <br><span style="font-weight: bold;">Formula</span> question = Formula.create("(Likes(Bob, 'Tom Smith') | -Likes(Bob, Rose))");<br>ArrayList&lt;FormulaAndProbability&gt; answers = client.<span style="color: rgb(51, 51, 255);">ask</span>(question, 0.50, 10);<br>System.out.println("Return Value:" + answers);<br><br></body></html>